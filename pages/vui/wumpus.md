---
layout: post-vui
title: Игра «Охота на Вампуса»
summary: 
date: 2021-10-30 00:00
category: vui
permalink: /vui/wumpus/
---

![Охота на Вампуса](/images/posts/wumpus-cover.jpg)

В 1972 году Грегори Йобом написал классическую текстовую игру Hunt the Wumpus. 

50 лет спустя я сделал её голосовой аналог для Алисы. Чтобы запустить его, скажите:

- Алиса, запусти навык «Охота на Вампуса»

- Алиса, давай сыграем в «Охоту на Вампуса».


### О чем был оригинал
![Вампус, такой Вампус](/images/posts/Wumpus-pic.jpg)

*Вампус, каким его видел создатель*

Вампус — это жуткий монстр, обитающий в пещерах. Вонючий, шумный, с присосками. Задача игрока — выследить Вампуса и застрелить его.

Пещера Вампуса состоит из 20 комнат. Из каждой комнаты можно попасть в три других. Получается лабиринт в форме расплющенного додекаэдра, что добавляет ощущения дизориентации в пространстве. 

![Карта игры](/images/posts/Hunt_the_Wumpus_map.jpg)
*Додекаэдр и его развертка с номерами комнат*

Помимо Вампуса в случайных комнатах находятся две ямы и две гигантских летучих мыши. От ям игрок погибает, а летучие мыши переносят его в другую случайную комнату. Даже если там Вампус.

Если игрок окажется в одной комнате с Вампусом, то тот его съест. Поэтому убить Вампуса можно только выстрелом из соседней комнаты. В оригинальной игре 1972 года стрелы игрока даже могли менять направление и бить на несколько комнат вперед.

Узнать о приближении Вампуса, ямы или летучей мыши можно было по запаху, сквозняку или шуму крыльев. Фраза «I smell a Wumpus» надолго засела в памяти детей того времени.

### Что изменилось с переходом «в голос»

При создании версии для Алисы я ориентировался как на смартфоны, так и на умные колонки. На экране отображается информация о комнатах, но игру можно пройти и без экрана — все обстановка озвучивается приятным синтезированным голосом Эрмила. 

Об опасностях теперь можно узнать, прислушавшись к звукам в комнате — это помогает глубже погрузиться в атмосферу. Зловещий рёв говорит о приближении Вампуса, рядом с ямами бушует сквозняк, а мыши пищат и хлопают крыльями. 

Умные стрелы пришлось выбросить, т.к. их путь крайне тяжело просчитать, не видя перед собой карты. Но зато теперь стрелами можно прощупывать ямы и летучих мышей.

### Разнообразие

Перемещаться между безликими корридорами было невыносимо скучно, поэтому каждую комнату я превратил в тематическую локацию. Их можно условно разделить на три части: первобытное общество, древний город и чудеса природы.

Открывая новую локацию, игрок может найти сокровище. В каждой игре их всего пять, но они всегда появляются в разных комнатах и тематически связаны со своими локациями. В тронном зале можно найти корону, а в амфитеатре - сценарий пьессы. Всего в игре около 50 разных сокровищ.

Почти у каждой реплики есть несколько вариантов. Завораживающий голос Эрмила позволил составить фразы, звучащие будто с экрана загрузки третьего «Ведьмака». Иногда Эрмил добавляет в свои реплики небольшие комментарии, что также добавляет игре разнообразия.

### Удобство 

При разработке я придерживался двух принципов:

1. Игрок может говорить что угодно.

2. Игрок плохо запоминает числа.

Исходя из первого принципа, я подготовил ответы на вопросы, которые могут возникнуть у пользователя во время игры: кто такой Вампус, зачем нужны сокровища и что нужно сделать для победы. Я также добавил возможность совершать быстрые действия в обход подсказкам в интерфейсе — вместо того, чтобы нажимать «Огонь» и выбирать комнату, игрок может просто сказать «Стреляй в комнату 12!».

Исходя из второго принципа, я добавил сообщения-напоминалки. В любой момент пользователь может спросить «Куда я могу идти» или «Напомни номера комнат» и получить ответ. Подобные штуки оказались незаменимы для игры без экрана, т.к. между озвучиванием номеров комнат и концом реплики ассистента проходит достаточно много времени — можно отвлечься и всё забыть.

![Быстрая стрельба в обход интерфейса](/images/posts/wumpus-shortcut.jpg)
![Ответы на вопросы](/images/posts/wumpus-smalltalk.jpg)

### Трудности

Несмотря на прекрасный голос, Эрмил обрабатывает интонации хуже Алисы. Не всегда делает паузы после запятой и игнорирует знаки вопроса. Поэтому во многих фразах пришлось вручную расставлять паузы и избегать вопросительных предложений.

### Планы на будущее
Вот несколько вещей, которые мне бы хотелось сделать в будущем:
- добавить картинки для каждой локации и события;
- настроить интеграцию с таблицей очков (чтобы выводить сообщение «Ваш результат лучше, чем у Х% игроков»);
- доработать некоторые звуки;
- добавить реплики после прохождения определенного количества комнат.