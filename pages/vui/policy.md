---
layout: post
title: Запросить номер полиса
permalink: /vui/policy/
---

Распознавание длинных чисел — проблемный кейс для голосового интерфейса, ведь одно и то же число можно произнести разными способами. Так 7000124 может превратиться в 7-30-124 (семь-три ноля-сто двадцать четыре) или 7000-100-20-4 (семь тысяч-сто-двадцать-четыре). Как же получить от пользователя корректный номер?

Идеальное решение — не спрашивать номер вовсе. Так вместо полиса ОМС можно использовать сочетание ФИО и даты рождения - так пользователю не придётся зачитывать мелкие цифры с бумажки. Система соотнесёт данные с базой полисов и сама подставит нужный. Но этот вариант нам скорее всего не согласуют, да и со сложными ФИО будут проблемы.  

### Запрашиваем готовность
Даже если заранее предупредить о том, что понадобится полис, пользователь может оказаться не готов к тому, чтобы диктовать его номер по команде бота. Притормозим диалог и дадим пользователю чуть больше контроля:

- Чтобы записать вас на приём, понадобится номер вашего полиса ОМС. Готовы назвать его?
- Готов
- Продиктуйте номер полиса.
- 123-345-5670

### Даём подсказку
В идеале мы не должны учить пользователя разговаривать. Пусть называет номер так, как ему удобно. Если ошибется - попросим повторить.

- Назовите номер полиса.
- 123-345-5670
- Не могу найти этот номер. Продиктуйте ещё раз.

Но что если пользователь диктует не номер полиса, а номер бланка с обратной стороны? Тогда он не поймёт своей ошибки и будет возвращаться к ней снова и снова. Возвращаемся к нашему сообщению и добавляем деталей:

- Назовите номер полиса.
- 123-345-5670
- Не могу найти этот номер. Продиктуйте ещё раз. Номер полиса состоит из 10 или 16 цифр.

### Помогаем быть понятым 

А что если дело не в номере, а в его распознавании? Например, пользователь говорит слишком медленно или невнятно произносит группы чисел? В этом случае попросим его продиктовать номер максимально безопасным способом: по одной цифре и без пауз. Следим за тем, чтобы формулировка нового сообщения не дублировала предыдущую.

- Назовите номер полиса.
- 123-345-5670
- Не могу найти этот номер. Продиктуйте ещё раз. Номер полиса состоит из 10 или 16 цифр.
- 123-345-5670
- Продикуйте номер ещё раз. По одной цифре и без пауз.

### Переводим на оператора
После двух неудачных попыток ввода переводим пользователя на живого оператора, иначе общение зациклится.  
- Назовите номер полиса.
- 123-345-5670
- Не могу найти этот номер. Продиктуйте ещё раз. Номер полиса состоит из 10 или 16 цифр.
- 123-345-5670
- Продикуйте номер ещё раз. По одной цифре и без пауз.
- Надоела уже!
- Кажется здесь я бессильна. Перевожу на оператора.


### Резюме
Как правильно запросить номер полиса:
1. Дайте пользователю самому сказать, когда он будет готов.
2. Разрешите диктовать так, как ему удобно.
3. Если ошибся в первый раз — дайте небольшую подсказку.
4. Если ошибся снова — подскажите, как избежать ошибки.
5. Если и это не помогло — переведите на оператора.

